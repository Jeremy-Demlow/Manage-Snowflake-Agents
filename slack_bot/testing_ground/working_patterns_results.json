{
  "test_results": {
    "timestamp": 1759706501.578486,
    "tests": [
      {
        "auth_method": "pat_token",
        "endpoint": "https://trb65519.snowflakecomputing.com/api/v2/cortex/agent:run",
        "status_code": 401,
        "headers": {
          "Date": "Sun, 05 Oct 2025 23:21:47 GMT",
          "Content-Type": "application/json",
          "X-Snowflake-Request-Id": "518075cd-aeeb-451d-8079-f15245ae3c93",
          "Server": "SF-LB",
          "X-Envoy-Upstream-Service-Time": "13",
          "X-Content-Type-Options": "nosniff",
          "X-Xss-Protection": "1; mode=block",
          "Expect-Ct": "enforce, max-age=3600",
          "Strict-Transport-Security": "max-age=31536000",
          "X-Snowflake-Fe-Instance": "-",
          "X-Snowflake-Fe-Config": "v20251001.0.0-28cad589.1759339601.prod3.1759706420477",
          "X-Frame-Options": "deny",
          "X-Envoy-Attempt-Count": "1",
          "Content-Encoding": "gzip",
          "Vary": "Accept-Encoding",
          "Transfer-Encoding": "chunked"
        },
        "success": false,
        "error": "{\n  \"code\" : \"394400\",\n  \"message\" : \"Programmatic access token is invalid.\"\n}"
      }
    ],
    "patterns_found": [
      "Intelligent routing logic works well",
      "Response parsing pattern works"
    ],
    "routing_accuracy": 1.0,
    "routing_tests": [
      {
        "question": "How many customers do we have?",
        "expected": "sql",
        "detected": "sql",
        "correct": true,
        "pattern": "\\b(count|list|how many|average)\\b"
      },
      {
        "question": "Show me the top 10 customers",
        "expected": "sql",
        "detected": "sql",
        "correct": true,
        "pattern": "\\bshow\\s+(?:me|the|\\d+)"
      },
      {
        "question": "List all contracts",
        "expected": "sql",
        "detected": "sql",
        "correct": true,
        "pattern": "\\b(count|list|how many|average)\\b"
      },
      {
        "question": "Average revenue per customer",
        "expected": "sql",
        "detected": "sql",
        "correct": true,
        "pattern": "\\b(count|list|how many|average)\\b"
      },
      {
        "question": "What is our company policy?",
        "expected": "rag",
        "detected": "rag",
        "correct": true,
        "pattern": "default"
      },
      {
        "question": "Tell me about safety procedures",
        "expected": "rag",
        "detected": "rag",
        "correct": true,
        "pattern": "default"
      },
      {
        "question": "How do we handle customer complaints?",
        "expected": "rag",
        "detected": "rag",
        "correct": true,
        "pattern": "default"
      }
    ]
  },
  "findings": {
    "summary": {
      "total_tests": 1,
      "successful_tests": 0,
      "patterns_found": 2,
      "routing_accuracy": 1.0
    },
    "key_patterns": [
      "Intelligent routing logic works well",
      "Response parsing pattern works"
    ],
    "recommendations": [
      "\u2705 Use regex-based intelligent routing for tool selection",
      "\ud83d\udd27 Focus on PAT token authentication (most reliable)",
      "\ud83d\udcdd Use proven response parsing patterns from working code",
      "\ud83e\udde0 Implement the SQL vs RAG routing logic",
      "\ud83d\ude80 Build iteratively starting with this proven foundation"
    ]
  }
}
